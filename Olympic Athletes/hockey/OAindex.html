<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>

circle {
  fill: #000;
  <!-- stroke: #000;
  stroke-width: 1.5px; -->
}
.line{opacity :0}
.node text {
  pointer-events: none;
  font: 10px sans-serif;
}
.right {
    position: absolute;
    right: 5%;
    width: 30%;
   
	
}
.ui-dialog {
    position: relative; 
    
    background :lavender;
    border: 2px solid white;
}
.ui-dialog .ui-dialog-content {
    border: 0
        background: lavender;
    overflow: auto;
    zoom: 1;}
body {
  font: sans-serif;
  font-size: 100%
  <!-- background-color : lavender -->
}
.svg-container {
    display: inline-block;
    position: relative;
    width: 100%;
    padding-bottom: 100%; /* aspect ratio */
    vertical-align: top;
    overflow: hidden;
}
.svg-content-responsive {
    display: inline-block;
    position: absolute;
    top: 10px;
    left: 0;
}
.svg-class{background-color:#33cc33;
	outline: thick solid black;}
</style>

<script src="//d3js.org/d3.v3.min.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
 <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
</script>
<body onload="show();">
	

<div id="option">
    <input name="updateButton" 
	       id = "button1"
           type="button" 
           value="Play" 
           onclick="check(value)" />
		  
</div> <div class="right" >Time: <span id="time"></span></div><br><br>



	
<script>


//stopwatch
 
 var	clsStopwatch = function() {
		// Private vars
		var	startAt	= 0;	// Time of last start / resume. (0 if not running)
		var	lapTime	= 0;	// Time on the clock when last stopped in milliseconds

		var	now	= function() {
				return (new Date()).getTime(); 
			}; 
 
		// Public methods
		// Start or resume
		this.start = function() {
				startAt	= startAt ? startAt : now();
			};

		// Stop or pause
		this.stop = function() {
				// If running, update elapsed time otherwise keep it
				lapTime	= startAt ? lapTime + now() - startAt : lapTime;
				startAt	= 0; // Paused
			};

		// Reset
		this.reset = function() {
				lapTime = startAt = 0;
			};

		// Duration
		this.time = function() {
				return lapTime + (startAt ? now() - startAt : 0); 
			};
	};
	//stopwatch ends

//stopwatch variables
var x = new clsStopwatch();
var $time;
var clocktimer;
//stopwatch variables

var stopwx = false;
 
var margin = {top: 40, right: 40, bottom: 40, left: 40},
    width = 914,
    height = 550;

	

   
var canvas = d3.select("body").append("div").attr("id","container")
                              .append("svg").attr("width",914).attr("height",550)
							  .attr("id","canvas1")
							  .attr("class","svg-class")
							  .attr("viewBox","0 0 600 550")
							  .attr("preserveAspectRatio", "xMinYMin meet");
							  
 var aspect = width / height,
    container = $("#container");
	
$(window).on("resize", function() {
    var targetWidth = container.width();
    canvas.attr("width", targetWidth);
    canvas.attr("height", Math.round(targetWidth / aspect));
}).trigger("resize");


startchart ();
	
function check(value)
{ if (value == 'Play')
    { document.getElementById("button1").value = 'Reset'
	   updateData();  }
 else {document.getElementById("button1").value = 'Play'
     canvas.select('.circle0').remove();
     canvas.select('.circle1').remove();
     canvas.select('.circle2').remove();
     canvas.select('.circle3').remove();
     canvas.select('.circle4').remove();
     canvas.select('.circle5').remove();
	 canvas.selectAll('.ball').remove();
	 canvas.selectAll(".image2").remove();
     canvas.selectAll(".text1").remove(); reset();
 startchart();}	}
	 
	 
function startchart(){
d3.tsv("OAdata.tsv", function(error, data) {
 if (error) throw error;
 
canvas.append('circle')
				  .attr("class","circle0")
				  .attr('cx', function () {return data[0].x1;})
				  .attr('cy', function () {return data[0].y1;})
				  .style('fill', function () {return data[0].fill;})
				  .attr('r', 15);

canvas.append('circle')
				  .attr("class","circle1")
				  .attr('cx', function () {return data[1].x1;})
				  .attr('cy', function () {return data[1].y1;})
				  .style('fill', function () {return data[1].fill;})
				  .attr('r', 15);
canvas.append('circle')
				  .attr("class","circle2")
				  .attr('cx', function () {return data[2].x1;})
				  .attr('cy', function () {return data[2].y1;})
				  .style('fill', function () {return data[2].fill;})
				  .attr('r', 15);
canvas.append('circle')
				  .attr("class","circle3")
				  .attr('cx', function () {return data[3].x1;})
				  .attr('cy', function () {return data[3].y1;})
				  .style('fill', function () {return data[3].fill;})
				  .attr('r', 15);
canvas.append('circle')
				  .attr("class","circle4")
				  .attr('cx', function () {return data[4].x1;})
				  .attr('cy', function () {return data[4].y1;})
				  .style('fill', function () {return data[4].fill;})
				  .attr('r', 15);
canvas.append('circle')
				  .attr("class","circle5")
				  .attr('cx', function () {return data[5].x1;})
				  .attr('cy', function () {return data[5].y1;})
				  .style('fill', function () {return data[5].fill;})
				  .attr('r', 15);

				  

//	var image1 = canvas.selectAll("image").data(data).enter().append("image")
//
  //  .attr("xlink:href", "player.jpg")
   // .attr("xlink:href", "Flags/australia.png")
// .attr("x", function(d) {return d.x1})
// .attr("y",function(d) {return d.y1})
// .attr("width", 32)
 // .attr("height", 30)
//.attr("clip-path", "url(#g-mug-clip)")
//  .style("pointer-events", "none"); 
var Ball = canvas.append("circle")
           .attr("class","ball")
           .attr('cx', 700)
				  .attr('cy', 300)
				  .style('fill', 'white')
				  .attr('r', 7.5);

var image2 = canvas.selectAll("image")
    .data(data).enter().append("image")
    .attr("class","image2")
	.attr("xlink:href", function(d) {return d.link})
   .attr("x", function(d) {return d.x1-60})
 .attr("y",function(d) {return d.y1-10})
 .attr("width", 32)
  .attr("height", 30)
  .style("opacity",1)

var line1 = [{"x":data[0].linex,"y":data[0].liney},{"x":data[0].x1,"y":data[0].y1}];
var line2 = [{"x":data[1].linex,"y":data[1].liney},{"x":data[1].x1,"y":data[1].y1}];
var line3 = [{"x":data[2].linex,"y":data[2].liney},{"x":data[2].x1,"y":data[2].y1}];
var line4 = [{"x":data[3].linex,"y":data[3].liney},{"x":data[3].x1,"y":data[3].y1}];
var line5 = [{"x":data[4].linex,"y":data[4].liney},{"x":data[4].x1,"y":data[4].y1}];
var line6 = [{"x":data[5].linex,"y":data[5].liney},{"x":data[5].x1,"y":data[5].y1}];

var fieldline1 = [{"x":(width/3.91926),"y":0},{"x":(width/3.91926),"y":height}];
var fieldline2 = [{"x":(width/2),"y":0},{"x":(width/2),"y":height}];
var fieldline3 = [{"x":(width/1.3322),"y":0},{"x":(width/1.3322),"y":height}];

var lineFunction = d3.svg.line()
                       .x(function(d) { return d.x; })
                        .y(function(d) { return d.y; });
             

canvas.append("path").attr("d", lineFunction(line1)).attr("class","line")
                          .attr("stroke", "blue")
                            .style("stroke-dasharray", ("3, 3"));
canvas.append("path").attr("d", lineFunction(line2)).attr("class","line")
                          .attr("stroke", "blue")
                            .style("stroke-dasharray", ("3, 3"));
canvas.append("path").attr("d", lineFunction(line3)).attr("class","line")
                          .attr("stroke", "blue")
                            .style("stroke-dasharray", ("3, 3"));
canvas.append("path").attr("d", lineFunction(line4)).attr("class","line")
                          .attr("stroke", "blue")
                            .style("stroke-dasharray", ("3, 3"));
canvas.append("path").attr("d", lineFunction(line5)).attr("class","line")
                          .attr("stroke", "blue")
                            .style("stroke-dasharray", ("3, 3"));
canvas.append("path").attr("d", lineFunction(line6)).attr("class","line")
                          .attr("stroke", "blue")
                            .style("stroke-dasharray", ("3, 3"));
canvas.append("path").attr("d", lineFunction(fieldline1)).attr("class","fline")
                          .attr("stroke", "black")
                            .style("stroke-width", 2);
canvas.append("path").attr("d", lineFunction(fieldline2)).attr("class","fline")
                          .attr("stroke", "black")
                            .style("stroke-width", 2);
canvas.append("path").attr("d", lineFunction(fieldline3)).attr("class","fline")
                          .attr("stroke", "black")
                            .style("stroke-width", 2);

var arc = d3.svg.arc()
  .	innerRadius(0)
  .outerRadius(height/3.167)
  .startAngle(90)
  .endAngle(150)


canvas.append("path").attr("d",arc)
.attr("transform", "translate(" + 0 + "," +(height/2)+")")
.attr("fill","#33cc33")
.style("stroke","black")
.style("stroke-width",1.5);

canvas.append("path").attr("d",arc)
.attr("transform", "translate(" + width+ "," +(height/2)+")")
.attr("fill","#33cc33")
.style("stroke","black")
.style("stroke-width",1.5);

canvas.append("text").attr("class","text1")
.attr("transform", "translate(" + (width/9)+ "," +(height/27.5)+")")
.text("Imagine 6 players from 6 countries are competing in a field hockey match.");
  
d3.tsv("OAdata.tsv", function(error, data) {
 if (error) throw error;
 
 
  
 var svg =  d3.select("body").transition()
 
 svg.select(".ball").transition().duration(1500).attr('cx', 550).attr('cy', 300);
 svg.selectAll(".text1").transition().duration(500).delay(3500).text("All players are at equal distance from the ball.Click Play.")
 .attr("transform", "translate(" + (450)+ "," +200+")");
 svg.selectAll(".line").transition().duration(500).delay(3000).style("opacity",1);

 
 }); 
 
 



 }) }
 
  
  function updateData()
  {
 
 
  d3.tsv("OAdata.tsv", function(error, data) {
 if (error) throw error;
 
 var svg =  d3.select("body").transition(); 


 
 //PopTable1
 
  var d1array =[];
  d1array[0] =[];
  	  
  for (i=0;i<data.length;i++)
   { d1array[i] = []; 
   d1array[i][0] = data[i].Country;
      d1array[i][1] = i+1;
      d1array[i][2] = data[i].Ht;
     }
var columns2 = ['Country','Order','Avg. Height'];
var columns1 = ["WHO REACHES THE BALL FIRST"];

var thead1 = d3.select("#test1").selectAll("th")
    .data(columns1)
    .enter()
    .append("th")
    .text(function(d) {
        return d;
    });
var thead2 = d3.select("#test1").selectAll("th")
    .data(columns2)
    .enter()
    .append("th")
    .text(function(d) {
        return d;
    });
	
var rows2 =d3.select("#test1").append('tbody').selectAll("tr").data(d1array).enter() .append("tr");
var cells2 = rows2.selectAll("td").data(function(d, i) { return d; })
             .enter()
             .append("td")
              .text(function(d, i) { return d; });
 
var zoom = d3.behavior.zoom()
    .scaleExtent([1, 10])
    .on("zoom", zoomed);
	
svg.transition()
      .duration(500).call(zoom.translate([550, 300]).event)   

function zoomed() {
  svg.attr("transform", "translate(" + d3.event.translate + ")scale(" + d3.event.scale + ")");
}	  
svg.select(".ball").transition().duration(1000).delay(4150).attr('cx', 700).attr('cy', 300)

svg.selectAll(".image2").transition().duration(1000).delay(750).style("opacity",0);			  

  
  svg.select(".circle0").transition().duration(5535)
  .attr('cx', function () {return data[0].x2;}).attr('cy', function (d) {return data[0].y2;})
  .each("start", function() {reset();start();} ).each("end", function() { stop(); })
svg.select(".circle1").transition().duration(5542).attr('cx', function () {return data[1].x2;}).attr('cy', function (d) {return data[1].y2;});				  
svg.select(".circle2").transition().duration(5623).attr('cx', function () {return data[2].x2;}).attr('cy', function (d) {return data[2].y2;});				  
svg.select(".circle3").transition().duration(5635).attr('cx', function () {return data[3].x2;}).attr('cy', function (d) {return data[3].y2;});				  
svg.select(".circle4").transition().duration(5700).attr('cx', function () {return data[4].x2;}).attr('cy', function (d) {return data[4].y2;});				  
svg.select(".circle5").transition().duration(5752).attr('cx', function () {return data[5].x2;}).attr('cy', function (d) {return data[5].y2;});				  
				  
 //svg.selectAll(".line").transition().duration().style("opacity",1);
				  //.transition().duration(3000).delay(5535).attr('cx', function (d) {return d.x3;})
				  //.attr('cy', function (d) {return d.y3;});
 svg.selectAll(".text1").transition().duration(524).delay(5000).text("The German will reach the ball first.")
 .attr("transform", "translate(" + 500+ "," +200+")").transition().duration(500).delay(8000).text("Reason?")
 .transition().duration(500).delay(11000).text("Average height of a German hockey player is highest.")
 .transition().duration(500).delay(14000).text("Heights directly affects a player's stride length and arm span")
 .transition().duration(500).delay(17000).text("Both aids in speed at which a field hockey player reaches the ball.")
 .each("end", function(){
 $( "#dialog-modal" ).dialog({
          open : function (event, ui){$("#test1").appendTo("#dialog-modal");       
	                                   $( "#dialog-modal" ).show();
	                                   $("#test1").show();
									   },
		  //close : function (event, ui){$( "#dialog-modal" ).html(" " );},
		  height: 200,
		  width: 300,
		   modal: true
        });
$( "#resizable" ).resizable();;});
 				  
svg.select(".circle0").transition().duration(500).delay(6000)
  .attr('cx', function () {return data[0].x3;}).attr('cy', function (d) {return data[0].y3;})
svg.selectAll(".image2").transition().duration(1500).delay(6000)
.attr("x",650).attr("y",250).style("opacity",function(d) {if (d.Country == "germany") {return 1}
                                                           else return 0;});			  
 
 
 
 })}
  
//stopwatch functions

function pad(num, size) {
	var s = "0000" + num;
	return s.substr(s.length - size);
}

function formatTime(time) {
	var h = m = s = ms = 0;
	var newTime = '';

	h = Math.floor( time / (60 * 60 * 1000) );
	time = time % (60 * 60 * 1000);
	m = Math.floor( time / (60 * 1000) );
	time = time % (60 * 1000);
	s = Math.floor( time / 1000 );
	ms = time % 1000;

	newTime = pad(h, 2) + ':' + pad(m, 2) + ':' + pad(s, 2) + ':' + pad(ms, 3);
	return newTime;
}

function show() {
	$time = document.getElementById('time');
	update();
}

function update() {
	$time.innerHTML = formatTime(x.time());
}

function start() {
	clocktimer = setInterval("update()", 1);
	x.start();
}

function stop() {
	x.stop();
	clearInterval(clocktimer);
}

function reset() {
	stop();
	x.reset();
	update();
}

	
</script>
<table id = "test1" style = "display:none"></table>	
<div id="dialog-modal" style="display:none"></div>
</body>
</html>